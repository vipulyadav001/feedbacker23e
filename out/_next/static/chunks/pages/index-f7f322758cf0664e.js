(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(4600)}])},4600:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var r=o(4848),i=o(6540),n=o(6715);let s=()=>{let e=(0,n.useRouter)(),[t,o]=(0,i.useState)(""),[s,l]=(0,i.useState)(!1),[a,d]=(0,i.useState)([]),[c,p]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=localStorage.getItem("userAvatar");e&&p(e)},[]),(0,i.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/comments");if(e.ok){let t=await e.json();d(t)}}catch(e){console.error("Error fetching comments:",e)}},h=async e=>{if(confirm("Are you sure you want to delete this comment?"))try{(await fetch("/api/comments?id=".concat(e),{method:"DELETE"})).ok&&x()}catch(e){console.error("Error deleting comment:",e)}},u=async(e,t)=>{try{(await fetch("/api/comments?action=like",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,unlike:t})})).ok&&(localStorage.setItem("liked_".concat(e),(!t).toString()),x())}catch(e){console.error("Error liking comment:",e)}},g=async e=>{if(e.preventDefault(),t.trim())try{(await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,userEmail:localStorage.getItem("userEmail")})})).ok&&(o(""),alert("Comment posted successfully!"),x())}catch(e){console.error("Error posting comment:",e)}};return(0,r.jsxs)("div",{style:{padding:"20px"},children:[(0,r.jsx)("div",{onClick:()=>e.push("/trending"),style:{position:"fixed",left:"20px",top:"50%",transform:"translateY(-50%)",width:"200px",padding:"15px",backgroundColor:"#1a8cd8",color:"white",textAlign:"center",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\uD83D\uDD25 Trending"}),(0,r.jsx)("div",{style:{position:"absolute",top:"20px",right:"20px",cursor:"pointer"},onClick:()=>window.location.href="/login",children:(0,r.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#1a8cd8",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px"},children:c?(0,r.jsx)("img",{src:c,alt:"User",style:{width:"40px",height:"40px",borderRadius:"50%"}}):"\uD83D\uDC64"})}),(0,r.jsx)("h1",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',fontSize:"24px",fontWeight:"500",margin:"0",padding:"20px"},children:"Feedbacker"}),(0,r.jsx)("div",{style:{width:"39.7vw",margin:"20px auto",position:"relative",height:"calc(100vh - 100px)"},children:(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",paddingRight:"20px",marginRight:"-20px",scrollbarWidth:"thin",scrollbarColor:"#333 transparent"},children:(0,r.jsxs)("div",{style:{direction:"ltr",paddingRight:"8px"},children:[a.map(t=>(0,r.jsxs)("div",{onClick:()=>e.push("/comment/".concat(t.id)),style:{padding:"15px",display:"flex",gap:"10px",marginBottom:"10px",backgroundColor:"#fff",borderRadius:"4px",cursor:"pointer",border:"1px solid #e1e8ed"},children:[(0,r.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#1a8cd8",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",flexShrink:0},children:"\uD83D\uDC64"}),(0,r.jsxs)("div",{style:{width:"100%"},children:[(0,r.jsx)("p",{style:{margin:"0 0 10px 0"},children:t.text}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"#666"},children:[(0,r.jsx)("span",{children:new Date(t.createdAt).toLocaleString()}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation();let o="true"===localStorage.getItem("liked_".concat(t.id));u(t.id,o)},style:{border:"none",background:"none",cursor:"pointer",marginRight:"10px",color:"true"===localStorage.getItem("liked_".concat(t.id))?"#ff4b4b":"#666"},children:["true"===localStorage.getItem("liked_".concat(t.id))?"❤️":"\uD83D\uDDA4"," ",t.likes]}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),h(t.id)},style:{border:"none",background:"none",cursor:"pointer"},children:"\uD83D\uDDD1️"})]})]})]})]},t.id)),s?(0,r.jsxs)("div",{style:{position:"fixed",bottom:"20px",left:"20px",background:"white",padding:"20px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",borderRadius:"8px",zIndex:1e3,width:"39.7vw"},children:[(0,r.jsx)("button",{onClick:()=>l(!1),style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"18px",cursor:"pointer",padding:"5px"},children:"✕"}),(0,r.jsxs)("form",{onSubmit:g,children:[(0,r.jsx)("textarea",{value:t,onChange:e=>o(e.target.value),placeholder:"Write your comment here...",style:{width:"100%",height:"100px",margin:"10px 0",padding:"8px",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"#fff",color:"#000"}}),(0,r.jsx)("button",{type:"submit",style:{padding:"8px 16px",backgroundColor:"#1a8cd8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Post Comment"})]})]}):(0,r.jsx)("button",{onClick:()=>l(!0),style:{position:"fixed",bottom:"20px",left:"20px",width:"50px",height:"50px",backgroundColor:"#1a8cd8",color:"white",border:"none",borderRadius:"50%",cursor:"pointer",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})})})]})}},6715:(e,t,o)=>{e.exports=o(8440)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2022)),_N_E=e.O()}]);